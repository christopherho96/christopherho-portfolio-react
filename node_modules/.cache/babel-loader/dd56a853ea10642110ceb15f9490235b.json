{"ast":null,"code":"var headers = {\n  Accept: 'application/json',\n  'Content-Type': 'application/json',\n  'Access-Control-Allow-Origin': '*'\n}; // export const getProjects = () => {\n//   const query = createQuery(params);\n//   return fetch(`http://localhost:5000/api/project?`, {\n//     headers,\n//   })\n//     .then(response => {\n//       if (!response.ok) {\n//         handleErrorResponse(response);\n//       }\n//       return response;\n//     })\n//     .then(parseJson)\n//     .then(d => d);\n// };\n\nexport var uploadImages = function uploadImages(images, numberOfImages, project) {\n  var urls = [];\n  images.forEach(function (file) {\n    var formData = new FormData();\n    formData.append('file', file);\n    fetch(\"http://localhost:5000/api/project/uploadImage\", {\n      headers: headers,\n      method: \"POST\",\n      body: formData\n    }).then(function (res) {\n      if (res.ok) {\n        res.json().then(function (response) {\n          urls.push(response.url);\n\n          if (urls.length === numberOfImages) {\n            createProject(urls, project);\n          }\n        });\n      } else if (res.status == 401) {\n        alert(\"Oops! \");\n      }\n    }, function (e) {\n      alert(\"Error submitting form!\");\n    });\n  });\n};\nexport var createProject = function createProject(urls, project) {\n  var formData = new FormData();\n  formData.append('title', project.title);\n  formData.append('description', project.description);\n  formData.append('pictures', urls);\n  fetch(\"http://localhost:5000/api/project/uploadProject\", {\n    headers: headers,\n    method: \"POST\",\n    body: formData\n  }).then(function (res) {\n    if (res.ok) {\n      alert(\"Perfect! \");\n    } else if (res.status == 401) {\n      alert(\"Oops! \");\n    }\n  }, function (e) {\n    alert(\"Error submitting form!\");\n  });\n};","map":{"version":3,"sources":["/Users/christopherho/Projects/christopherhoportfolio-react/src/utils/api.js"],"names":["headers","Accept","uploadImages","images","numberOfImages","project","urls","forEach","file","formData","FormData","append","fetch","method","body","then","res","ok","json","response","push","url","length","createProject","status","alert","e","title","description"],"mappings":"AAAA,IAAMA,OAAO,GAAG;AACdC,EAAAA,MAAM,EAAE,kBADM;AAEd,kBAAgB,kBAFF;AAGd,iCAA8B;AAHhB,CAAhB,C,CAMA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,MAAD,EAASC,cAAT,EAAyBC,OAAzB,EAAqC;AAC/D,MAAIC,IAAI,GAAG,EAAX;AACAH,EAAAA,MAAM,CAACI,OAAP,CAAe,UAACC,IAAD,EAAU;AACvB,QAAIC,QAAQ,GAAG,IAAIC,QAAJ,EAAf;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBH,IAAxB;AACAI,IAAAA,KAAK,CAAC,+CAAD,EACL;AACEZ,MAAAA,OAAO,EAAEA,OADX;AAEEa,MAAAA,MAAM,EAAE,MAFV;AAGEC,MAAAA,IAAI,EAAEL;AAHR,KADK,CAAL,CAKGM,IALH,CAKQ,UAACC,GAAD,EAAS;AACf,UAAIA,GAAG,CAACC,EAAR,EAAY;AACVD,QAAAA,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgB,UAACI,QAAD,EAAc;AAC5Bb,UAAAA,IAAI,CAACc,IAAL,CAAUD,QAAQ,CAACE,GAAnB;;AACA,cAAGf,IAAI,CAACgB,MAAL,KAAgBlB,cAAnB,EAAkC;AAChCmB,YAAAA,aAAa,CAACjB,IAAD,EAAOD,OAAP,CAAb;AACD;AACF,SALD;AAMD,OAPD,MAOO,IAAIW,GAAG,CAACQ,MAAJ,IAAc,GAAlB,EAAuB;AAC5BC,QAAAA,KAAK,CAAC,QAAD,CAAL;AACD;AACF,KAhBD,EAgBG,UAAUC,CAAV,EAAa;AACdD,MAAAA,KAAK,CAAC,wBAAD,CAAL;AACD,KAlBD;AAmBD,GAtBD;AAuBD,CAzBM;AA2BP,OAAO,IAAMF,aAAa,GAAG,SAAhBA,aAAgB,CAACjB,IAAD,EAAOD,OAAP,EAAmB;AAC9C,MAAII,QAAQ,GAAG,IAAIC,QAAJ,EAAf;AACAD,EAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBN,OAAO,CAACsB,KAAjC;AACAlB,EAAAA,QAAQ,CAACE,MAAT,CAAgB,aAAhB,EAA+BN,OAAO,CAACuB,WAAvC;AACAnB,EAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4BL,IAA5B;AACAM,EAAAA,KAAK,CAAC,iDAAD,EACL;AACEZ,IAAAA,OAAO,EAAEA,OADX;AAEEa,IAAAA,MAAM,EAAE,MAFV;AAGEC,IAAAA,IAAI,EAAEL;AAHR,GADK,CAAL,CAKGM,IALH,CAKQ,UAAUC,GAAV,EAAe;AACrB,QAAIA,GAAG,CAACC,EAAR,EAAY;AACVQ,MAAAA,KAAK,CAAC,WAAD,CAAL;AACD,KAFD,MAEO,IAAIT,GAAG,CAACQ,MAAJ,IAAc,GAAlB,EAAuB;AAC5BC,MAAAA,KAAK,CAAC,QAAD,CAAL;AACD;AACF,GAXD,EAWG,UAAUC,CAAV,EAAa;AACdD,IAAAA,KAAK,CAAC,wBAAD,CAAL;AACD,GAbD;AAcD,CAnBM","sourcesContent":["const headers = {\n  Accept: 'application/json',\n  'Content-Type': 'application/json',\n  'Access-Control-Allow-Origin':'*'\n};\n\n// export const getProjects = () => {\n//   const query = createQuery(params);\n\n//   return fetch(`http://localhost:5000/api/project?`, {\n//     headers,\n//   })\n//     .then(response => {\n//       if (!response.ok) {\n//         handleErrorResponse(response);\n//       }\n//       return response;\n//     })\n//     .then(parseJson)\n//     .then(d => d);\n// };\n\nexport const uploadImages = (images, numberOfImages, project) => {\n  var urls = []\n  images.forEach((file) => {\n    let formData = new FormData();\n    formData.append('file', file);\n    fetch(\"http://localhost:5000/api/project/uploadImage\", \n    {\n      headers: headers,\n      method: \"POST\",\n      body: formData\n    }).then((res) => {\n      if (res.ok) {\n        res.json().then((response) => {\n          urls.push(response.url)\n          if(urls.length === numberOfImages){\n            createProject(urls, project)\n          }\n        });\n      } else if (res.status == 401) {\n        alert(\"Oops! \");\n      }\n    }, function (e) {\n      alert(\"Error submitting form!\");\n    });\n  })\n}\n\nexport const createProject = (urls, project) => {\n  let formData = new FormData();\n  formData.append('title', project.title);\n  formData.append('description', project.description);\n  formData.append('pictures', urls);\n  fetch(\"http://localhost:5000/api/project/uploadProject\", \n  {\n    headers: headers,\n    method: \"POST\",\n    body: formData\n  }).then(function (res) {\n    if (res.ok) {\n      alert(\"Perfect! \");\n    } else if (res.status == 401) {\n      alert(\"Oops! \");\n    }\n  }, function (e) {\n    alert(\"Error submitting form!\");\n  });\n}\n"]},"metadata":{},"sourceType":"module"}