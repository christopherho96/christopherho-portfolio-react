{"ast":null,"code":"var headers = {\n  Accept: 'application/json',\n  'Access-Control-Allow-Origin': '*'\n};\nexport var parseJson = function parseJson(response) {\n  if (response.status === 200) {\n    return Promise.resolve({});\n  }\n\n  return response.json().catch(function (error) {\n    var newError = error; // Use thrown error so it has the correct stack trace,\n    // but a more friendly message\n\n    newError.message = 'There was a problem with response from the server.';\n    throw newError;\n  });\n};\nexport var fetchProjects = function fetchProjects() {\n  return fetch(\"http://localhost:5000/api/project?\", {\n    headers: headers,\n    method: \"GET\"\n  }).then(function (response) {\n    if (response.ok) {\n      //handleErrorResponse(response);\n      return response;\n    }\n  }).then(parseJson).then(function (d) {\n    return d;\n  });\n};\nexport var uploadImages = function uploadImages(data) {\n  var urls = [];\n  data.pictures.forEach(function (file) {\n    var formData = new FormData();\n    formData.append('file', file);\n    fetch(\"http://localhost:5000/api/project/uploadImage\", {\n      headers: headers,\n      method: \"POST\",\n      body: formData\n    }).then(function (res) {\n      if (res.ok) {\n        res.json().then(function (response) {\n          urls.push(response.url);\n\n          if (urls.length === data.pictures.length) {\n            createProject(urls, data.title, data.description);\n          }\n        });\n      } else if (res.status == 401) {\n        alert(\"Oops! \");\n      }\n    }, function (e) {\n      alert(\"Error submitting form!\");\n    });\n  });\n};\nexport var createProject = function createProject(urls, title, description) {\n  var formData = new FormData();\n  formData.append('title', title);\n  formData.append('description', description);\n  formData.append('pictures', urls);\n  fetch(\"http://localhost:5000/api/project/uploadProject\", {\n    headers: headers,\n    method: \"POST\",\n    body: formData\n  }).then(function (res) {\n    if (res.ok) {\n      alert(\"Perfect! \");\n    } else if (res.status == 401) {\n      alert(\"Oops! \");\n    }\n  }, function (e) {\n    alert(\"Error submitting form!\");\n  });\n};","map":{"version":3,"sources":["/Users/christopherho/Projects/christopherhoportfolio-react/src/utils/api.js"],"names":["headers","Accept","parseJson","response","status","Promise","resolve","json","catch","error","newError","message","fetchProjects","fetch","method","then","ok","d","uploadImages","data","urls","pictures","forEach","file","formData","FormData","append","body","res","push","url","length","createProject","title","description","alert","e"],"mappings":"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","sourcesContent":["const headers = {\n  Accept: 'application/json',\n  'Access-Control-Allow-Origin':'*'\n};\n\nexport const parseJson = response => {\n  if (response.status === 200) {\n    return Promise.resolve({});\n  }\n\n  return response.json().catch(error => {\n    const newError = error;\n    // Use thrown error so it has the correct stack trace,\n    // but a more friendly message\n    newError.message = 'There was a problem with response from the server.';\n    throw newError;\n  });\n};\n\nexport const fetchProjects = () => {\n\n  return fetch(`http://localhost:5000/api/project?`, {\n    headers,\n    method: \"GET\",\n  })\n    .then(response => {\n      if (response.ok) {\n        //handleErrorResponse(response);\n        return response\n      }\n    })    \n    .then(parseJson)\n    .then(d => d);\n};\n\nexport const uploadImages = (data) => {\n  var urls = []\n  data.pictures.forEach((file) => {\n    let formData = new FormData();\n    formData.append('file', file);\n    fetch(\"http://localhost:5000/api/project/uploadImage\", \n    {\n      headers: headers,\n      method: \"POST\",\n      body: formData\n    }).then((res) => {\n      if (res.ok) {\n        res.json().then((response) => {\n          urls.push(response.url)\n          if(urls.length === data.pictures.length){\n            createProject(urls, data.title, data.description)\n          }\n        });\n      } else if (res.status == 401) {\n        alert(\"Oops! \");\n      }\n    }, function (e) {\n      alert(\"Error submitting form!\");\n    });\n  })\n}\n\nexport const createProject = (urls, title, description) => {\n  let formData = new FormData();\n  formData.append('title', title);\n  formData.append('description', description);\n  formData.append('pictures', urls);\n  fetch(\"http://localhost:5000/api/project/uploadProject\", \n  {\n    headers: headers,\n    method: \"POST\",\n    body: formData\n  }).then(function (res) {\n    if (res.ok) {\n      alert(\"Perfect! \");\n    } else if (res.status == 401) {\n      alert(\"Oops! \");\n    }\n  }, function (e) {\n    alert(\"Error submitting form!\");\n  });\n}\n"]},"metadata":{},"sourceType":"module"}