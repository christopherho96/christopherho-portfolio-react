{"ast":null,"code":"import { login, fetchProjects, deleteProject, uploadImage, createProject } from '../../../utils/api';\nimport { LOGIN, LOGOUT, ACCESS_TOKEN, FETCH_PROJECTS_FOR_DASHBOARD, OPEN_DELETE_PROJECT_DIALOG, CLOSE_DELETE_PROJECT_DIALOG, SHOW_PROGRESS_OVERLAY, HIDE_PROGRESS_OVERLAY, SHOW_SNACKBAR, HIDE_SNACKBAR } from '../../../utils/constants';\nimport history from '../../../utils/history';\nexport var loginUser = function loginUser(user) {\n  return function (dispatch) {\n    login(user).then(function (token) {\n      if (token !== undefined) {\n        dispatch({\n          type: LOGIN\n        });\n        localStorage.setItem(ACCESS_TOKEN, token);\n        history.push(\"/dashboard\");\n      } else {\n        handleError(\"Invalid Credentials.\");\n      }\n    });\n  };\n};\nexport var logoutUser = function logoutUser() {\n  return function (dispatch) {\n    dispatch({\n      type: LOGOUT\n    });\n    localStorage.removeItem(ACCESS_TOKEN);\n    history.push(\"/login\");\n  };\n};\nexport var deleteSelectedProject = function deleteSelectedProject(projectId) {\n  return function (dispatch) {\n    deleteProject(projectId).then(function (success) {\n      if (success) {\n        window.location.reload();\n      } else {\n        handleError(\"Failed to delete project. Please check the project exists.\");\n      }\n    });\n  };\n};\nexport var getProjects = function getProjects() {\n  return function (dispatch) {\n    return fetchProjects().then(function (projects) {\n      dispatch({\n        type: FETCH_PROJECTS_FOR_DASHBOARD,\n        payload: projects\n      });\n    });\n  };\n};\nexport var openDeleteProjectDialog = function openDeleteProjectDialog(projectId) {\n  return function (dispatch) {\n    dispatch({\n      type: OPEN_DELETE_PROJECT_DIALOG,\n      payload: projectId\n    });\n  };\n};\nexport var closeDeleteProjectDialog = function closeDeleteProjectDialog() {\n  return function (dispatch) {\n    dispatch({\n      type: CLOSE_DELETE_PROJECT_DIALOG\n    });\n  };\n};\nexport var createAProject = function createAProject(project) {\n  return function (dispatch) {\n    dispatch({\n      type: SHOW_PROGRESS_OVERLAY\n    });\n    var pictureUrls = [];\n    project.pictures.forEach(function (picture) {\n      uploadImage(picture).then(function (json) {\n        pictureUrls.push(json.url);\n\n        if (pictureUrls.length === project.pictures.length) {\n          uploadImage(project.thumbnail).then(function (json) {\n            createProject(pictureUrls, json.url, project.title, project.description, project.type).then(function (json) {\n              dispatch({\n                type: HIDE_PROGRESS_OVERLAY\n              });\n              history.push(\"/dashboard\");\n            }).catch(function (error) {\n              handleError(error.message);\n            });\n          }).catch(function (error) {\n            handleError(error.message);\n          });\n        }\n      }).catch(function (error) {\n        handleError(error.message);\n      });\n    });\n  };\n};\nexport var handleError = function handleError(message) {\n  return function (dispatch) {\n    dispatch({\n      type: SHOW_SNACKBAR,\n      payload: message\n    });\n  };\n};\nexport var hideSnackBar = function hideSnackBar() {\n  return function (dispatch) {\n    dispatch({\n      type: HIDE_SNACKBAR\n    });\n  };\n};","map":{"version":3,"sources":["/Users/christopherho/Projects/christopherhoportfolio-react/src/screens/admin/redux/actions.js"],"names":["login","fetchProjects","deleteProject","uploadImage","createProject","LOGIN","LOGOUT","ACCESS_TOKEN","FETCH_PROJECTS_FOR_DASHBOARD","OPEN_DELETE_PROJECT_DIALOG","CLOSE_DELETE_PROJECT_DIALOG","SHOW_PROGRESS_OVERLAY","HIDE_PROGRESS_OVERLAY","SHOW_SNACKBAR","HIDE_SNACKBAR","history","loginUser","user","dispatch","then","token","undefined","type","localStorage","setItem","push","handleError","logoutUser","removeItem","deleteSelectedProject","projectId","success","window","location","reload","getProjects","projects","payload","openDeleteProjectDialog","closeDeleteProjectDialog","createAProject","project","pictureUrls","pictures","forEach","picture","json","url","length","thumbnail","title","description","catch","error","message","hideSnackBar"],"mappings":"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","sourcesContent":["import { login, fetchProjects, deleteProject, uploadImage, createProject } from '../../../utils/api'\nimport { \n  LOGIN,\n  LOGOUT,\n  ACCESS_TOKEN,\n  FETCH_PROJECTS_FOR_DASHBOARD,\n  OPEN_DELETE_PROJECT_DIALOG,\n  CLOSE_DELETE_PROJECT_DIALOG,\n  SHOW_PROGRESS_OVERLAY,\n  HIDE_PROGRESS_OVERLAY,\n  SHOW_SNACKBAR,\n  HIDE_SNACKBAR\n} from '../../../utils/constants'\nimport history from '../../../utils/history'\n\nexport const loginUser = (user) => dispatch => {\n  login(user).then( token => {\n    if(token !== undefined){\n      dispatch({\n        type: LOGIN,\n      })\n      localStorage.setItem(ACCESS_TOKEN, token)\n      history.push(\"/dashboard\")\n    } else {\n      handleError(\"Invalid Credentials.\")\n    }\n  })\n}\n\nexport const logoutUser = () => dispatch => {\n      dispatch({\n        type: LOGOUT,\n      })\n      localStorage.removeItem(ACCESS_TOKEN)\n      history.push(\"/login\")\n}\n\nexport const deleteSelectedProject = (projectId) => dispatch => {\n  deleteProject(projectId).then( success => {\n    if(success){\n      window.location.reload()\n    } else {\n      handleError(\"Failed to delete project. Please check the project exists.\")\n    }\n  })\n}\n\nexport const getProjects = () => dispatch => {\n  return fetchProjects().then(projects => {\n    dispatch({\n      type: FETCH_PROJECTS_FOR_DASHBOARD,\n      payload: projects,\n    })\n  })\n}\n\nexport const openDeleteProjectDialog = projectId => dispatch => {\n  dispatch({\n    type: OPEN_DELETE_PROJECT_DIALOG,\n    payload: projectId,\n  });\n};\n\nexport const closeDeleteProjectDialog = () => dispatch => {\n  dispatch({\n    type: CLOSE_DELETE_PROJECT_DIALOG,\n  });\n};\n\nexport const createAProject = (project) => dispatch => {\n  dispatch({\n    type: SHOW_PROGRESS_OVERLAY,\n  })\n  var pictureUrls = []\n  project.pictures.forEach((picture) => {\n    uploadImage(picture).then(json => {\n      pictureUrls.push(json.url)\n      if(pictureUrls.length === project.pictures.length){\n        uploadImage(project.thumbnail).then(json => {\n          createProject(\n            pictureUrls, \n            json.url,\n            project.title,\n            project.description,\n            project.type\n          ).then(json => {\n            dispatch({\n              type: HIDE_PROGRESS_OVERLAY,\n            });\n            history.push(\"/dashboard\")\n          }).catch(error => {\n            handleError(error.message)\n          })\n        }).catch(error => {\n          handleError(error.message)\n        })\n      }\n    }).catch(error => {\n      handleError(error.message)\n    })\n  })\n}\n\nexport const handleError = (message) => dispatch => {\n  dispatch({\n    type: SHOW_SNACKBAR,\n    payload: message\n  })\n}\n\nexport const hideSnackBar = () => dispatch => {\n  dispatch({\n    type: HIDE_SNACKBAR\n  })\n}"]},"metadata":{},"sourceType":"module"}